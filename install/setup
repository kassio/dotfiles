#!/usr/bin/env bash

source "$(dirname $0)/global"

# Ask for superpowers upfront
sudo -v

pushd ${HOME} > /dev/null && trap 'popd > /dev/null' EXIT HUP INT QUIT TERM

${INSTALLER}/setup-xcode
${INSTALLER}/setup-basic-packages
${INSTALLER}/setup-shell
${INSTALLER}/setup-rcfiles
${INSTALLER}/setup-ruby
source ${DOTFILES}/lib/env

# Installing all my stuff
brew bundle --global

# Config atom
apm install --packages-file ${INSTALLER}/atom-packages

# install iterm2 integration
update-iterm2-integrations

# Use key backspace instead of ^H
infocmp ${TERM} | sed 's/kbs=^[hH]/kbs=\\177/' > /tmp/${TERM}.ti
tic /tmp/${TERM}.ti

# Customize OSX
${INSTALLER}/setup-macos
${INSTALLER}/setup-sudo-fingerprint

exit 0
