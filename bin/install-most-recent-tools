#!/usr/bin/env bash

title "Setup asdf"

for plugin in elixir erlang nodejs ruby
do
  asdf plugin-add "$plugin" &>/dev/null
done

title "Ruby"
RUBY_VERSION="$(asdf list-all ruby | grep "^\s*\d\.\d\.\d$" | tail -1 | tr -d ' ')"

asdf install ruby "${RUBY_VERSION}"
asdf global ruby "${RUBY_VERSION}"

title "Erlang"
ERLANG_VERSION="$(asdf list-all erlang | grep -v "rc" | sort -h | tail -1)"

asdf install erlang "${ERLANG_VERSION}"
asdf global erlang "${ERLANG_VERSION}"

title "Elixir"
ELIXIR_VERSION="$(asdf list-all elixir | grep -v "rc" | sort -h | tail -1)"

asdf install elixir "${ELIXIR_VERSION}"
asdf global elixir "${ELIXIR_VERSION}"

title "Node"
NODE_VERSION="$(asdf list-all nodejs | tail -1)"

asdf install nodejs "${NODE_VERSION}"
asdf global nodejs "${NODE_VERSION}"
