#!/usr/bin/env bash

case "$1" in
  -q | --quiet)
    exec &>/dev/null
    ;;
esac

if git remote get-url origin &>/dev/null
then
  master=$(cat .git/custom-master 2>/dev/null || echo 'master')
  branch=$(git symbolic-ref --short HEAD)
  trap "git checkout ${branch} &>/dev/null" EXIT HUP INT QUIT TERM

  git checkout ${master} &>/dev/null
  git fetch --prune -P --tags && git pull
fi
