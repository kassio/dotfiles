#!/usr/bin/env zsh

cache="${HOME}/.cache/term_profile"
themes_path="${HOME}/.config/kitty/themes/"
current_theme="${themes_path}/current.conf"

set_kitty_profile() {
  if [ "${TERM_PROGRAM}" != "kitty" ]; then
    return
  fi

  ln -sf "${themes_path}/$1" "${current_theme}"
  kitty @ set-colors --all --configured "${current_theme}"
}

case "$1" in
  dark)
    set_kitty_profile "nightfox.conf"
    echo "dark" > "${cache}"
    ;;
  light)
    set_kitty_profile "dayfox.conf"
    echo "light" > "${cache}"
    ;;
esac
