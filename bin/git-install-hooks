#!/usr/bin/env bash

for hook in update post-commit post-rebase post-checkout
do
  hook_file=".git/hooks/$hook"
  if [[ -e $hook_file ]]
  then
    if [[ -z "$(ag git-local-hook $hook_file 2>/dev/null)" ]]
    then
      echo "Updating hook in $hook_file"
      echo "git-local-hook" >> $hook_file
    fi
  else
    echo "Installing hook in $hook_file"
    echo "git-local-hook" > $hook_file
    chmod +x $hook_file
  fi
done
