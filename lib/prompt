#!/usr/bin/env zsh

source "${HOMEBREW_PREFIX}/etc/bash_completion.d/git-prompt.sh"

export GIT_PS1_SHOWDIRTYSTATE=true
export GIT_PS1_SHOWSTASHSTATE=true
export GIT_PS1_SHOWUNTRACKEDFILES=true
export GIT_PS1_SHOWUPSTREAM=true
export GIT_PS1_SHOWCOLORHINTS=true
export GIT_PS1_DESCRIBE_STYLE=branch
export GIT_PS1_SHOWUPSTREAM=verbose

 # To be overwritten on $HOME/.dotfiles.private/env
 __ps1_extra() { echo ''; }

 __ps1() {
   local pre="$(print -P "\n")"
   local post="$(print -P "\n%F{blue}%~%f\n%(?.%F{green}.%F{red})$%f ")"
   local git="$(print -P "\n%F{yellow}(%f%%s%F{yellow})$(__ps1_extra)")"

   __git_ps1 "${pre}" "${post}" "${git}"
 }

precmd_functions+=__ps1
