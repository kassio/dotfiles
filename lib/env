export HOMEBREW_PREFIX="$(brew --prefix 2>/dev/null)"
export HOMEBREW_NO_ANALYTICS=1

# personal cd paths
export CDPATH=".:${HOME}:${HOME}/.config"

# rbenv
eval "$(rbenv init -)"

# my bin, and project bin
export PATH="./bin:${DOTFILES}/bin:${PATH}"

# Default editor
export EDITOR="nvim"
# improve ls colors
export CLICOLOR=1
# mysql prompt
export MYSQL_PS1='\d\$ '
# my lang
export LC_ALL="en_US.UTF-8"
export LC_CTYPE="en_US.UTF-8"
export LANG="en_US.UTF-8"
# open man with neovim
export MANPAGER="nvim -c 'set ft=man' -"

source ${DOTFILES}/lib/heroku
source ${DOTFILES}/lib/aliases
source ${DOTFILES}/lib/less
source ${DOTFILES}/lib/git

__title() {
  echo -ne "\e]1;${PWD/${HOME}/\$HOME}\a"
}

precmd_functions=(__ps1 __title)
export PROMPT_COMMAND="__ps1; __title"

# local env
if [ -e "${HOME}/.env" ]
then
  source ${HOME}/.env
fi

iterm_integration_script="${HOME}/.iterm2_shell_integration.${ZSH_NAME:-bash}"
if [ -f ${iterm_integration_script} ]
then
  source ${iterm_integration_script}
fi

# added by travis gem
if [ -f "${HOME}/.travis/travis.sh" ]
then
  source "${HOME}/.travis/travis.sh"
fi

export __USER_BADGE=""
# iterm2 badge manipulation
function set-badge() {
  if [ -n "$1" ]
  then
    export __USER_BADGE="$@"
  else
    export __USER_BADGE="$(basename $PWD)"
  fi

  iterm2_set_user_var badge "${__USER_BADGE}" 2>/dev/null
}

function unset-badge() {
  if [ -n "${__USER_BADGE}" ]
  then
    iterm2_set_user_var badge "" 2>/dev/null
  fi
}

export FZF_DEFAULT_COMMAND="ag --skip-vcs-ignores --hidden --follow --nocolor -l"
export FZF_DEFAULT_OPTS="--reverse --tiebreak=begin,length,index"

ssh-add -A 2>/dev/null;

# vim:ft=sh:
