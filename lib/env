# vim:ft=sh:

export HOMEBREW_PREFIX="$(brew --prefix 2>/dev/null)"
export HOMEBREW_NO_ANALYTICS=1

export EDITOR="nvim"
export MANPAGER="nvim -c 'set ft=man' -"

export CLICOLOR=1
export MYSQL_PS1='\d\$ '
export LC_ALL="en_US.UTF-8"
export LC_CTYPE="en_US.UTF-8"
export LANG="en_US.UTF-8"

export FZF_DEFAULT_COMMAND="ag --skip-vcs-ignores --hidden --follow --nocolor -l"
export FZF_DEFAULT_OPTS="--reverse --tiebreak=begin,length,index"

export ERL_AFLAGS="-kernel shell_history enabled -kernel shell_history_file_bytes 2097152"
export ERLANG_OPENSSL_PATH="${HOMEBREW_PREFIX}/opt/openssl"
export KERL_CONFIGURE_OPTIONS="--disable-debug --without-javac --with-ssl=/usr/local/opt/openssl@1.1"

# Coding path
export PROJECTS_PATH="${HOME}/src"

# Personal CDPATHs
export CDPATH=".:${HOME}:${PROJECTS_PATH}:${HOME}/.config"

# gpg
export GPG_TTY="$(tty)"

# libxml2
export LDFLAGS="-L${HOMEBREW_PREFIX}/opt/libxml2/lib"
export CPPFLAGS="-I${HOMEBREW_PREFIX}/opt/libxml2/include"
export PKG_CONFIG_PATH="${HOMEBREW_PREFIX}/opt/libxml2/lib/pkgconfig"
export PKG_CONFIG_PATH="${HOMEBREW_PREFIX}/opt/icu4c/lib/pkgconfig:${PKG_CONFIG_PATH}"

# set console tab size to 2 spaces
tabs -2

__window_title() { echo -ne "\e]1;${PWD/${HOME}/\$HOME}\a"; }

precmd_functions=(__ps1 __window_title)
export PROMPT_COMMAND="__ps1; __window_title"

ssh-add -A 2>/dev/null;

# asdf
source "${HOMEBREW_PREFIX}/opt/asdf/asdf.sh"
source "${HOMEBREW_PREFIX}/etc/bash_completion.d/asdf.bash"

source "${DOTFILES}/lib/heroku"
source "${DOTFILES}/lib/aliases"
source "${DOTFILES}/lib/less"
source "${DOTFILES}/lib/git"

# added by travis gem
source "${HOME}/.travis/travis.sh" &>/dev/null
source "${HOME}/.iterm2_shell_integration.${ZSH_NAME:-bash}" &>/dev/null
source "${HOME}/.dotfiles.private/env" &>/dev/null
source "${HOME}/.env" &>/dev/null

# My personal bin
export PATH="./bin:${DOTFILES}/bin:${HOMEBREW_PREFIX}:${PATH}"
