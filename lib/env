export HOMEBREW_PREFIX="$(brew --prefix 2>/dev/null)"
export HOMEBREW_NO_ANALYTICS=1

# personal cd paths
export CDPATH=".:$HOME:$HOME/.config"

# rbenv
eval "$(rbenv init -)"

# my bin, and project bin
export PATH="./bin:$DOTFILES/bin:$PATH"

# always use colors and case insensitive on `grep`
export GREP_OPTIONS="--color=auto -i"
# remote neovim socket
export NVIM_LISTEN_ADDRESS=/tmp/nvimsocket
# Default editor
export EDITOR="nvim"
# improve ls colors
export CLICOLOR=1
# mysql prompt
export MYSQL_PS1='\d\$ '
# my lang
export LC_ALL="en_US.UTF-8"
export LC_CTYPE="en_US.UTF-8"
export LANG="en_US.UTF-8"

source $DOTFILES/lib/heroku
source $DOTFILES/lib/aliases
source $DOTFILES/lib/less

export GIT_PS1_SHOWDIRTYSTATE=true
export GIT_PS1_SHOWSTASHSTATE=true
export GIT_PS1_SHOWUNTRACKEDFILES=true
export GIT_PS1_SHOWCOLORHINTS=true
export GIT_PS1_DESCRIBE_STYLE=branch
export GIT_PS1_SHOWUPSTREAM=verbose

# local env
if [ -e "$HOME/.env" ]
then
  source $HOME/.env
fi

export __ITERM_SHELL_INTEGRATION_LOADED=
function __load_iterm2_integration() {
  iterm_integration_script="$HOME/.iterm2_shell_integration.${ZSH_NAME:-bash}"
  if [ -f $iterm_integration_script ]
  then
    ITERM_SHELL_INTEGRATION_INSTALLED="" source $iterm_integration_script \
      && export __ITERM_SHELL_INTEGRATION_LOADED=true
  else
    return -1
  fi
}

export __USER_BADGE=""
# iterm2 badge manipulation
function set-badge() {
  [ -z $__ITERM_SHELL_INTEGRATION_LOADED ] && __load_iterm2_integration

  if [ -n "$1" ]
  then
    export __USER_BADGE="$@"
  else
    export __USER_BADGE="$(basename $PWD)"
  fi

  iterm2_set_user_var badge "$__USER_BADGE" 2>/dev/null
}

function unset-badge() {
  if [ -n "$__USER_BADGE" ]
  then
    iterm2_set_user_var badge "" 2>/dev/null
  fi
}

export RG_GLOB="--glob \"!.git/*\" --glob \"!node_modules/*\" --glob \"!tmp/*\""
export RG_OPTIONS="--pretty --no-ignore --hidden --follow $RG_GLOB"
export FZF_DEFAULT_COMMAND="rg $RG_OPTIONS --files"

# vim:ft=sh:
